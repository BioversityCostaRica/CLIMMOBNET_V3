{% extends "../page.html" %}

{%- block leftside_menu %}
    {% if activeUser %}
        {% snippet 'snippets/navbar.html', request=request, active="Dash" %}
    {% endif %}
{% endblock leftside_menu -%}

{%- block page_content %}
    <div class="row">
        <div class="col-lg-12 ">

            {% if newquestion == True %}
                <div class="alert alert-success fade in">
                    <button data-dismiss="alert" class="close close-sm" type="button">
                        <i class="fa fa-times"></i>
                    </button>
                    <strong>{{ _('Success!') }}</strong> {{ _('The question has been added.') }}
                </div>
            {% endif %}
            {% if editquestion == True %}
                <div class="alert alert-success fade in">
                    <button data-dismiss="alert" class="close close-sm" type="button">
                        <i class="fa fa-times"></i>
                    </button>
                    <strong>{{ _('Success!') }}</strong> {{ _('The question has been modified.') }}
                </div>
            {% endif %}

            <header class="panel-heading " style="background-color: #ec971f">
                <b style="color: #ffffff">{{ _('QUESTIONS MANAGER') }}</b>
            </header>
            <div class="panel-body " style="background-color: #ccc">
                <div class="row">
                    <div class="col-lg-6">
                        <section class="panel" >
                            <header class="panel-heading " style="background-color: #449d44;">
                                <b style="color: #ffffff">{{ _('ClimMob library') }}</b>
                            </header>
                            <div class="panel-body" align="center">

                            </div>
                        </section>
                    </div>

                    <div class="col-lg-6">
                        <section class="panel">
                            <header class="panel-heading" style="background-color: #286090">
                                <b style="color: #ffffff">{{ _('User library') }}</b>
                            </header>
                            <div class="panel-body">
                                <button id="addnewquestions" class="btn btn-success" onclick="showAddQuestions()">{{ _('Add new questions') }} <i class="fa fa-plus"></i></button><br><br>
                                {% if UserQuestion %}
                                    {% for questions in UserQuestion %}

                                        <div class="panel panel-info">
                                              <div class="panel-heading">
                                                  <table style="width: 100%">
                                                      <tr>
                                                          <td style="width: 88%">
                                                              {{ questions.question_notes }}: <i style="color: #000; font-size: 13px">{{ questions.question_unit }}</i>
                                                          </td>
                                                          <td align="center" >
                                                                <button style="" class="btn btn-warning btn-xs" title="{{ _('Edit project') }}" onclick="showModifyQuestion('{{ questions.question_id }}','{{ questions.question_notes }}','{{ questions.question_desc }}','{{ questions.question_unit }}', '{{ questions.question_dtype }}', '{{ questions.question_oth }}','{{ questions.question_reqinreg }}','{{ questions.question_reqinasses }}')"><i class="fa fa-pencil"></i></button>
                                                                <button style="" class="btn btn-danger btn-xs" title="{{ _('Delete project') }}" ><i class="fa fa-trash-o "></i></button>
                                                          </td>
                                                      </tr>
                                                  </table>
                                              </div>

                                              <div class="panel-body">
                                                  {{ questions.question_desc }}<br><br>
                                                  <table class="display table table-bordered">
                                                      <tr>
                                                          <th>{{ _('Type of question') }}</th>
                                                          {% if questions.question_dtype == 5 or questions.question_dtype == 6%}
                                                            <th>{{ _('Accept other') }}</th>
                                                          {% endif %}
                                                          <th>{{ _('Registration required') }}</th>
                                                          <th>{{ _('Assessment required') }}</th>
                                                      </tr>
                                                      <tr>
                                                          <td align="center">

                                                              {% if questions.question_dtype == 1%}
                                                                  <span style="min-width: 100px" class="badge bg-climmob fa fa-keyboard-o"> {{ _('Text') }}</span>
                                                              {% else %}
                                                                  {% if questions.question_dtype == 2%}
                                                                      <span style="min-width: 100px" class="badge bg-climmob fa  fa-sort-numeric-asc"> {{ _('Decimal') }}</span>
                                                                  {% else %}
                                                                        {% if questions.question_dtype == 3%}
                                                                            <span style="min-width: 100px" class="badge bg-climmob fa  fa-sort-numeric-asc"> {{ _('Integer') }}</span>
                                                                        {% else %}
                                                                            {% if questions.question_dtype == 4%}
                                                                                <span style="min-width: 100px" class="badge bg-climmob fa fa-map-marker"> {{ _('Localization') }}</span>
                                                                            {% else %}
                                                                                {% if questions.question_dtype == 5%}
                                                                                    <span style="min-width: 100px" class="badge bg-climmob fa fa-dot-circle-o"> {{ _('Select one') }}</span>
                                                                                {% else %}
                                                                                    {% if questions.question_dtype == 6%}
                                                                                        <span style="min-width: 100px" class="badge bg-climmob fa fa-check-square-o"> {{ _('Select multiple') }}</span>
                                                                                    {% endif %}
                                                                                {% endif %}
                                                                            {% endif %}
                                                                        {% endif %}
                                                                  {% endif %}
                                                              {% endif %}
                                                          </td>

                                                          {% if questions.question_dtype == 5 or questions.question_dtype == 6%}
                                                              <td align="center">

                                                                  {% if questions.question_oth ==1 %}
                                                                        <span style="min-width: 100px" class="badge bg-climmob fa fa-check-square-o"> </span>
                                                                  {% else %}
                                                                        <span style="min-width: 100px" class="badge bg-important fa fa-times"> </span>
                                                                  {% endif %}
                                                              </td>
                                                          {% endif %}

                                                          <td align="center">

                                                              {% if questions.question_reqinreg ==1 %}
                                                                    <span style="min-width: 100px" class="badge bg-climmob fa fa-check-square-o"> </span>
                                                              {% else %}
                                                                    <span style="min-width: 100px" class="badge bg-important fa fa-times"> </span>
                                                              {% endif %}
                                                          </td>
                                                          <td align="center">

                                                              {% if questions.question_reqinasses ==1 %}
                                                                    <span style="min-width: 100px" class="badge bg-climmob fa fa-check-square-o"> </span>
                                                              {% else %}
                                                                    <span style="min-width: 100px" class="badge bg-important fa fa-times"> </span>
                                                              {% endif %}
                                                          </td>
                                                      </tr>
                                                  </table>
                                              </div>
                                        </div>
                                    {% endfor %}
                                {% else %}
                                      <b>{{ _('No data to display') }}</b>
                                {% endif %}
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </div>


        <div class="modal fade" id="AddQuestions" tabindex="-1" role="dialog" aria-labelledby="AddQuestionsLabel" aria-hidden="true">
            <form class="form-horizontal" role="form" method="post" action="{{ request.path }}">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header modal-header-success">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">{{ _('New question') }}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row toastr-row">
                                <div class="col-md-6">

                                    <label>{{ _('Question') }}</label><br>
                                    <input type="text" class="form-control"  value="" id="txt_notes" name="txt_notes" placeholder=" ">

                                    <label>{{ _('Description') }}</label><br>
                                    <textarea class="form-control" type="input" id="txt_description" name="txt_description" value=""></textarea>

                                    <label>{{ _('Indication') }}</label><br>
                                    <input type="text" class="form-control"  value="" id="txt_indication" name="txt_indication" placeholder=" ">

                                    <label>{{ _('Type') }}</label><br>
                                    <select id="cmbtype" name="cmbtype" class="form-control bound-s" style="width: 100%">
                                        <option value="">{{ _('select the type') }}</option>
                                        <option value="1">{{ _('Text') }}</option>
                                        <option value="2">{{ _('Decimal') }}</option>
                                        <option value="3">{{ _('Integer') }}</option>
                                        <option value="4">{{ _('Localization') }}</option>
                                        <option value="5">{{ _('Select one') }}</option>
                                        <option value="6">{{ _('Select multiple') }}</option>
                                        <option value="7">{{ _('Package') }}</option>
                                        <option value="8">{{ _('Observer') }}</option>
                                    </select><br>
                                    <hr>

                                    <div id="div_others" style="display: none">
                                        <label>{{ _('Accept "other"') }}</label><br>
                                        <input type="checkbox" id="ckb_acceptother"  name="ckb_acceptother" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>
                                    </div>

                                    <label>{{ _('Registration required') }}</label><br>
                                    <input type="checkbox" id="ckb_registrationrequired"  name="ckb_registrationrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>

                                    <label>{{ _('Assessment required') }}</label><br>
                                    <input type="checkbox" id="ckb_assessmentrequired"  name="ckb_assessmentrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" >

                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">{{ _('Cancel') }}</button>
                            <button class="btn btn-success" type="submit" name="btn_add_question"> {{ _('Add') }}</button>
                        </div>

                    </div>
                </div>
            </form>
        </div>

        {%  if error_summary %}
            <div class="modal fade" id="AddQuestionsE" tabindex="-1" role="dialog" aria-labelledby="AddQuestionsLabel" aria-hidden="true">
                <form class="form-horizontal" role="form" method="post" action="{{ request.path }}">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header modal-header-success">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">{{ _('New question') }}</h4>
                            </div>
                            <div class="modal-body">

                                {%  if error_summary %}
                                    {% for key, error in error_summary.items() %}
                                        <div class="alert alert-block alert-danger fade in" id="loginErrorMessage">
                                            <button id="{{ key }}" data-dismiss="alert" class="close close-sm" type="button">
                                                <i class="fa fa-times"></i>
                                            </button>
                                            <strong>{{ _("Error!") }}</strong> {{ error }}.
                                        </div>
                                    {% endfor %}
                                {% endif %}
                                <div class="row toastr-row">
                                    <div class="col-md-6">

                                        <label>{{ _('Question') }}</label><br>
                                        <input type="text" class="form-control"  value="{{ dataworking['question_notes'] }}" id="txt_notesE" name="txt_notes" placeholder=" ">

                                        <label>{{ _('Description') }}</label><br>
                                        <textarea class="form-control" type="input" id="txt_descriptionE" name="txt_description" value="">{{ dataworking['question_desc'] }}</textarea>

                                        <label>{{ _('Indication') }}</label><br>
                                        <input type="text" class="form-control"  value="{{ dataworking['question_unit'] }}" id="txt_indicationE" name="txt_indication" placeholder=" ">

                                        <label>{{ _('Type') }}</label><br>


                                        <select id="cmbtypeE" name="cmbtype" class="form-control bound-s" style="width: 100%">

                                            <option value="">{{ _('select the type') }}</option>
                                            <option value="1" {% if dataworking.question_dtype == '1' %}selected {% endif %}>{{ _('Text') }}</option>
                                            <option value="2" {% if dataworking.question_dtype == '2' %}selected {% endif %}>{{ _('Decimal') }}</option>
                                            <option value="3" {% if dataworking.question_dtype == '3' %}selected {% endif %}>{{ _('Integer') }}</option>
                                            <option value="4" {% if dataworking.question_dtype == '4' %}selected {% endif %}>{{ _('Localization') }}</option>
                                            <option value="5" {% if dataworking.question_dtype == '5' %}selected {% endif %}>{{ _('Select one') }}</option>
                                            <option value="6" {% if dataworking.question_dtype == '6' %}selected {% endif %}>{{ _('Select multiple') }}</option>
                                            <option value="7" {% if dataworking.question_dtype == '7' %}selected {% endif %}>{{ _('Package') }}</option>
                                            <option value="8" {% if dataworking.question_dtype == '8' %}selected {% endif %}>{{ _('Observer') }}</option>


                                        </select><br>
                                        <hr>
                                        {% if dataworking.question_dtype == '6' or dataworking.question_dtype == '5' %}
                                            {% set style_others = "block" %}
                                        {% else %}
                                            {% set style_others = "none" %}
                                        {% endif %}
                                        <div id="div_othersE" style="display: {{ style_others }}">
                                            <label>{{ _('Accept "other"') }}</label><br>

                                            {% if dataworking.question_oth == 1 %}
                                                <input type="checkbox" id="ckb_acceptotherE"  name="ckb_acceptother" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" checked><br><br>
                                            {% else %}
                                                <input type="checkbox" id="ckb_acceptotherE"  name="ckb_acceptother" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>
                                            {% endif %}
                                        </div>

                                        <label>{{ _('Registration required') }}</label><br>
                                        {% if dataworking.question_reqinreg == 1 %}
                                            <input type="checkbox" id="ckb_registrationrequiredE"  name="ckb_registrationrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" checked><br><br>
                                        {% else %}
                                            <input type="checkbox" id="ckb_registrationrequiredE"  name="ckb_registrationrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>
                                        {% endif %}

                                        <label>{{ _('Assessment required') }}</label><br>
                                        {% if dataworking.question_reqinasses ==1 %}
                                            <input type="checkbox" id="ckb_assessmentrequiredE"  name="ckb_assessmentrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" checked>
                                        {% else %}
                                            <input type="checkbox" id="ckb_assessmentrequiredE"  name="ckb_assessmentrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" >
                                        {% endif %}
                                    </div>
                                </div>

                            </div>
                            <div class="modal-footer">
                                <button data-dismiss="modal" class="btn btn-default" type="button">{{ _('Cancel') }}</button>
                                <button class="btn btn-success" type="submit" name="btn_add_question"> {{ _('Add') }}</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        {% endif %}

<!-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------->
        <div class="modal fade" id="ModifyQuestions" tabindex="-1" role="dialog" aria-labelledby="ModifyQuestionsLabel" aria-hidden="true">
            <form class="form-horizontal" role="form" method="post" action="{{ request.path }}">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header modal-header-update">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title">{{ _('Modify question') }}</h4>
                        </div>
                        <div class="modal-body">
                            <div class="row toastr-row">
                                <div class="col-md-6">
                                    <input type="text" id="modify_txt_id" name="modify_txt_id" style="display: none">

                                    <label>{{ _('Question') }}</label><br>
                                    <input type="text" class="form-control"  value="" id="modify_txt_notes" name="modify_txt_notes" placeholder=" ">

                                    <label>{{ _('Description') }}</label><br>
                                    <textarea class="form-control" type="input" id="modify_txt_description" name="modify_txt_description" value=""></textarea>

                                    <label>{{ _('Indication') }}</label><br>
                                    <input type="text" class="form-control"  value="" id="modify_txt_indication" name="modify_txt_indication" placeholder=" ">

                                    <label>{{ _('Type') }}</label><br>
                                    <select id="modify_cmbtype" name="modify_cmbtype" class="form-control bound-s" style="width: 100%">
                                        <option value="">{{ _('select the type') }}</option>
                                        <option value="1">{{ _('Text') }}</option>
                                        <option value="2">{{ _('Decimal') }}</option>
                                        <option value="3">{{ _('Integer') }}</option>
                                        <option value="4">{{ _('Localization') }}</option>
                                        <option value="5">{{ _('Select one') }}</option>
                                        <option value="6">{{ _('Select multiple') }}</option>
                                        <option value="7">{{ _('Package') }}</option>
                                        <option value="8">{{ _('Observer') }}</option>
                                    </select><br>
                                    <hr>

                                    <div id="modify_div_others" style="display: none">
                                        <label>{{ _('Accept "other"') }}</label><br>
                                        <input type="checkbox" id="modify_ckb_acceptother"  name="modify_ckb_acceptother" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>
                                    </div>

                                    <label>{{ _('Registration required') }}</label><br>
                                    <input type="checkbox" id="modify_ckb_registrationrequired"  name="modify_ckb_registrationrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>

                                    <label>{{ _('Assessment required') }}</label><br>
                                    <input type="checkbox" id="modify_ckb_assessmentrequired"  name="modify_ckb_assessmentrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" >

                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default" type="button">{{ _('Cancel') }}</button>
                            <button class="btn btn-warning" type="submit" name="btn_modify_question"> {{ _('Modify') }}</button>
                        </div>

                    </div>
                </div>
            </form>
        </div>

        {%  if error_summary %}
            <div class="modal fade" id="ModifyQuestionsE" tabindex="-1" role="dialog" aria-labelledby="ModifyQuestionsLabel" aria-hidden="true">
                <form class="form-horizontal" role="form" method="post" action="{{ request.path }}">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header modal-header-update">
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                <h4 class="modal-title">{{ _('Modify question') }}</h4>
                            </div>
                            <div class="modal-body">
                                {%  if error_summary %}
                                    {% for key, error in error_summary.items() %}
                                        <div class="alert alert-block alert-danger fade in" id="loginErrorMessage">
                                            <button id="{{ key }}" data-dismiss="alert" class="close close-sm" type="button">
                                                <i class="fa fa-times"></i>
                                            </button>
                                            <strong>{{ _("Error!") }}</strong> {{ error }}.
                                        </div>
                                    {% endfor %}
                                {% endif %}
                                <div class="row toastr-row">
                                    <div class="col-md-6">
                                        <input type="text" id="modify_txt_idE" name="modify_txt_id" style="display: none">

                                        <label>{{ _('Question') }}</label><br>
                                        <input type="text" class="form-control"  value="{{ dataworking.question_notes }}" id="modify_txt_notesE" name="modify_txt_notes" placeholder=" ">

                                        <label>{{ _('Description') }}</label><br>
                                        <textarea class="form-control" type="input" id="modify_txt_descriptionE" name="modify_txt_description" value="">{{ dataworking.question_desc }}</textarea>

                                        <label>{{ _('Indication') }}</label><br>
                                        <input type="text" class="form-control"  value="{{ dataworking.question_unit }}" id="modify_txt_indicationE" name="modify_txt_indication" placeholder=" ">

                                        <label>{{ _('Type') }}</label><br>
                                        <select id="modify_cmbtypeE" name="modify_cmbtype" class="form-control bound-s" style="width: 100%">
                                            <option value="">{{ _('select the type') }}</option>
                                            <option value="1" {% if dataworking.question_dtype == '1' %}selected {% endif %}>{{ _('Text') }}           </option>
                                            <option value="2" {% if dataworking.question_dtype == '2' %}selected {% endif %}>{{ _('Decimal') }}        </option>
                                            <option value="3" {% if dataworking.question_dtype == '3' %}selected {% endif %}>{{ _('Integer') }}        </option>
                                            <option value="4" {% if dataworking.question_dtype == '4' %}selected {% endif %}>{{ _('Localization') }}   </option>
                                            <option value="5" {% if dataworking.question_dtype == '5' %}selected {% endif %}>{{ _('Select one') }}     </option>
                                            <option value="6" {% if dataworking.question_dtype == '6' %}selected {% endif %}>{{ _('Select multiple') }}</option>
                                            <option value="7" {% if dataworking.question_dtype == '7' %}selected {% endif %}>{{ _('Package') }}        </option>
                                            <option value="8" {% if dataworking.question_dtype == '8' %}selected {% endif %}>{{ _('Observer') }}       </option>
                                        </select><br>
                                        <hr>
                                        {% if dataworking.question_dtype == '6' or dataworking.question_dtype == '5' %}
                                            {% set style_others = "block" %}
                                        {% else %}
                                            {% set style_others = "none" %}
                                        {% endif %}

                                        <div id="modify_div_othersE" style="display: {{ style_others }}">
                                            <label>{{ _('Accept "other"') }}</label><br>
                                            {% if dataworking.question_oth == 1 %}
                                                <input type="checkbox" id="modify_ckb_acceptotherE"  name="modify_ckb_acceptother" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" checked><br><br>
                                            {% else %}
                                                <input type="checkbox" id="modify_ckb_acceptotherE"  name="modify_ckb_acceptother" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>
                                            {% endif %}
                                        </div>

                                        <label>{{ _('Registration required') }}</label><br>
                                        {% if dataworking.question_reqinreg == 1 %}
                                            <input type="checkbox" id="modify_ckb_registrationrequiredE"  name="modify_ckb_registrationrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" checked><br><br>
                                        {% else %}
                                            <input type="checkbox" id="modify_ckb_registrationrequiredE"  name="modify_ckb_registrationrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" ><br><br>
                                        {% endif %}

                                        <label>{{ _('Assessment required') }}</label><br>
                                        {% if dataworking.question_reqinasses ==1 %}
                                            <input type="checkbox" id="modify_ckb_assessmentrequiredE"  name="modify_ckb_assessmentrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" checked>
                                        {% else %}
                                            <input type="checkbox" id="modify_ckb_assessmentrequiredE"  name="modify_ckb_assessmentrequired" data-on-color="success" data-off-color="danger" data-on-text="{{ _('YES') }}" data-off-text="{{ _('NO') }}" >
                                        {% endif %}
                                    </div>
                                </div>
                            </div>

                            <div class="modal-footer">
                                <button data-dismiss="modal" class="btn btn-default" type="button">{{ _('Cancel') }}</button>
                                <button class="btn btn-warning" type="submit" name="btn_modify_question"> {{ _('Modify') }}</button>
                            </div>

                        </div>
                    </div>
                </form>
            </div>

        {% endif %}

{%- endblock page_content %}