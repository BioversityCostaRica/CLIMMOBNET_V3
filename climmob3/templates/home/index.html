{% extends "../page.html" %}

{%- block leftside_menu %}
    {% if activeUser %}
        {% snippet 'snippets/navbar.html', request=request, active="Dash" %}
    {% endif %}
{% endblock leftside_menu -%}

{%- block page_content %}
    {% if activeUser %}

        {% snippet 'snippets/projects_menu.html', request=request, project_data=project_data, dataworking=dataworking  %}

        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
        {% if dataworking.project_cod != "" %}
            <div class="row">
                <div class="col-md-12" >
                    <section class="panel" style="border-color: #F1F2F7">
                        <div class="bio-graph-heading project-heading">
                            <strong> {{ dataworking.project_cod }} </strong>

                        </div>
                    </section>

                    <div class="panel-group m-bot20" id="accordion">
                        <div class="section_accordion section panel panel-default" >
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#section_information">
                                        {{ _('Information') }}
                                    </a>
                                </h4>
                            </div>
                            <div id="section_information" class="panel-collapse collapse {% if Active == "section_information" %}in{% endif %}">
                                <div class="panel-body">
                                    Anim pariatur cliche reprehenderit, enim eiusmod high life accusamus terry richardson ad squid. 3 wolf moon officia aute, non cupidatat skateboard dolor brunch. Food truck quinoa nesciunt laborum eiusmod. Brunch 3 wolf moon tempor, sunt aliqua put a bird on it squid single-origin coffee nulla assumenda shoreditch et. Nihil anim keffiyeh helvetica, craft beer labore wes anderson cred nesciunt sapiente ea proident. Ad vegan excepteur butcher vice lomo. Leggings occaecat craft beer farm-to-table, raw denim aesthetic synth nesciunt you probably haven't heard of them accusamus labore sustainable VHS.
                                </div>
                            </div>
                        </div>
                        <div class="section_accordion section panel panel-default" >
                            <div class="panel-heading">
                                <h4 class="panel-title">
                                    <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion" href="#section_settings">
                                        {{ _('Settings') }}
                                    </a>
                                </h4>
                            </div>
                            <div id="section_settings" class="panel-collapse collapse {% if Active == "section_settings" %}in{% endif %}">
                                <div class="panel-body" style="padding: 0px">

                                    <div class="col-lg-2" style="padding: 0px">
                                        <section class="panel">
                                            <div class="panel-body" style="padding: 0px">

                                                <ul class="inbox-nav " id="menu_settings">
                                                    <li name="snp_countries" {% if menuActive== "snp_countries" %} class="active" {% endif %}>
                                                        <a ><i class="fa fa-globe"></i> {{ _("Countries") }} </a>
                                                    </li>
                                                    <li name="snp_tecnologies" {% if menuActive== "snp_tecnologies" %} class="active" {% endif %} >
                                                        <a ><i class="fa fa-pagelines"></i> {{ _("Technologies") }}</a>
                                                    </li>
                                                    <li name="snp_languajes" {% if menuActive== "snp_languajes" %} class="active" {% endif %}>
                                                        <a ><i class="fa fa-eye"></i> {{ _("Languajes") }}</a>
                                                    </li>
                                                    <li name="snp_enumerators" {% if menuActive== "snp_enumerators" %} class="active" {% endif %}>
                                                        <a ><i class=" fa fa-user"></i> {{ _("Enumerators") }} </a>
                                                    </li>
                                                    <li name="snp_registration" {% if menuActive== "snp_registration" %} class="active" {% endif %}>
                                                        <a ><i class=" fa fa-comments-o"></i> {{ _("Registration form") }}</a>
                                                    </li>
                                                </ul>

                                            </div>
                                        </section>
                                    </div>
                                    <div class="col-lg-10" style="padding: 0px;">
                                        <section class="panel">
                                            <div class="panel-body" style="border: 0px;background-color: #d5d7de;">

                                                <div id="snp_countries" style="display:{% if menuActive == "snp_countries"%}block{% else %}none{% endif %}">
                                                    {% snippet 'snippets/snippet_projectcountries.html', request=request, newcountryproject = projectCountries.newcountryproject, contactcountryEdited=projectCountries.contactcountryEdited, projectcountryDelete=projectCountries.projectcountryDelete, dataworking=projectCountries.dataworking, error_summary=projectCountries.error_summary, Countries=projectCountries.Countries, PrjCnty= projectCountries.PrjCnty,projectid= projectCountries.projectid, currentLoc= 'home' %}
                                                </div>

                                                <div id="snp_tecnologies" style="display:{% if menuActive == "snp_tecnologies"%}block{% else %}none{% endif %}">
                                                    {%snippet 'snippets/snippet_projecttechnologies.html', request=request, error_summaryadd = var.error_summaryadd, error_summarydlt=var.error_summarydlt, dltTechnologyProject=var.dltTechnologyProject, newTechnologyProject=var.newTechnologyProject, TechnologiesUser=var.TechnologiesUser, TechnologiesInProject=var.TechnologiesInProject, projectid=var.projectid, currentLoc= 'home' %}
                                                </div>

                                                <div id="snp_languajes" style="display:{% if menuActive == "snp_languajes"%}block{% else %}none{% endif %}">
                                                    lenguajes
                                                </div>

                                                <div id="snp_enumerators" style="display:{% if menuActive == "snp_enumerators"%}block{% else %}none{% endif %}">
                                                    {% snippet 'snippets/snippet_projectenumerator.html', request=request, dataworking=projectenumerator.dataworking, dltenumerator=projectenumerator.dltenumerator, mdfenumerator=projectenumerator.mdfenumerator, newenumerator=projectenumerator.newenumerator, error_summaryenumerator=projectenumerator.error_summaryenumerator, searchEnumerator=projectenumerator.searchEnumerator, projectid= projectenumerator.projectid, currentLoc= 'home' %}
                                                </div>

                                                <div id="snp_registration" style="display:{% if menuActive == "snp_registration"%}block{% else %}none{% endif %}">
                                                    registration
                                                </div>



                                            </div>
                                        </section>
                                    </div>


                                </div>
                            </div>
                        </div>
                    </div>
                    <!--collapse end-->
                </div>
            </div>
        {% else %}
            nada
        {% endif %}




    {% else %}
        <div class="row bio-graph-heading">
            <div class="col-lg-12" style="text-align: center" >
                <h1> {{ _('Welcome to Climmob') }} </h1>
            </div>
            <div class="lead">
                ClimMob is a software programme for <b><i>crowdsourcing climatesmart-agriculture</i></b>. Crowdsourcing means that tasks are outsourced to “crowds”, large numbers of volunteers who each do a small task. Crowdsourcing uses the Internet or mobile telephones to distribute work. This makes it possible to engage many people at a low cost and realize large amounts of work in a short time.Crowdsourcing climate-smart agriculture implies that farmers contribute observations in order to produce information about technological options under different field conditions. These observations are then combined and patterns extracted, providing new insights about the suitability of the evaluated options.
            </div>
        </div>
        <div class="row state-overview">
            <h2 class="heading_left_padding">Portal statistics</h2>

            {% set stats = helpers.getPortalStats() %}
            {#
    <div class="col-lg-4 col-sm-6">
        {% snippet 'snippets/counters.html', color='terques', icon='fa-user', value=stats.totUsers, description='Registered users' %}
    </div>
    <div class="col-lg-4 col-sm-6">
        {% snippet 'snippets/counters.html', color='yellow', icon='fa-book', value=stats.totModels, description='Projects' %}
    </div>
    <div class="col-lg-4 col-sm-6">
        {% snippet 'snippets/counters.html', color='blue', icon='fa-leaf', value=stats.totFeeds, description='Observations' %}
    </div>
    #}
        </div>
        <hr>
        <div class="flot-chart">
            <div class="row">
                <h2 class="heading_left_padding">Recent analysis</h2>
                <div class="col-lg-6">
                    <section class="panel">
                        <header class="panel-heading">
                            <h4>Example of complex graph</h4>
                            User: Jacob. Project: Maize in Kenya
                        </header>
                        <div class="panel-body">
                            <div id="chart-2" class="chart"></div>
                        </div>
                    </section>
                </div>
                <div class="col-lg-6">
                    <section class="panel">
                        <header class="panel-heading">
                            <h4>Example of simple pie graph</h4>
                            User: Carlos Quiros. Project: Beans in Nicaragua
                        </header>
                        <div class="panel-body">
                            <div id="chart-5" style="height:350px;"></div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
        <hr>
        <div class="row">
            <h2 class="heading_left_padding">Climmob is supported by</h2>
            <div class="col-lg-4">
                <img class="logo img-responsive" src="{{ request.static_url('climmob3:static/bioversity.png')}} " alt="Bioversity International">
            </div>
            <div class="col-lg-4">
                <img class="logo img-responsive" src="{{ request.static_url('climmob3:static/usaid.png')}} " alt="USAID">
            </div>
            <div class="col-lg-4">
                <img class="logo img-responsive" src="{{ request.static_url('climmob3:static/ccafs.png')}} " alt="CCAFS">
            </div>
        </div>
    {% endif %}











    <!--



                                                                    Para crear el proyecto


    -->

    <div class="modal fade " id="addNewProject" tabindex="-1" role="dialog" aria-labelledby="addNewProjectLabel"
         aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header modal-header-success">
                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    <h4 class="modal-title">{{ _('Add new project') }}</h4>
                </div>

                <form name="addNewProjectForm" role="form" method="post" action="{{ request.route_url('project') }}">
                    <input type="hidden" id="callerpath" name="callerpath" value="{{ request.url }}">

                    <div class="modal-body">

                        <div class="row toastr-row">
                            <div class="col-md-12">

                                <section class="panel">
                                    <header class="panel-heading tab-bg-dark-navy-blue">
                                        <ul class="nav nav-tabs nav-justified ">
                                            <li class="active">
                                                <a href="#information" data-toggle="tab">
                                                    {{ _('Información general') }}
                                                </a>
                                            </li>
                                            <li>
                                                <a href="#comments" data-toggle="tab">
                                                    {{ _('Muestra') }}
                                                </a>
                                            </li>
                                            <li class="">
                                                <a href="#map" data-toggle="tab" id="mapa">
                                                    {{ _('Mapa') }}
                                                </a>
                                            </li>
                                        </ul>
                                    </header>
                                    <div class="panel-body">
                                        <div class="tab-content tasi-tab">
                                            <div class="tab-pane active" id="information">
                                                <div class="form-group">
                                                    <label> {{ _('Project Code') }}</label><br>
                                                    <input class="form-control" type="input" id="newproject_code" name="newproject_code"
                                                           value="">

                                                </div>

                                                <div class="form-group">
                                                    <label>{{ _('Project Name') }}</label><br>
                                                    <input class="form-control" type="input" id="newproject_name" name="newproject_name" value="">
                                                </div>

                                                <div class="form-group">
                                                    <label>{{ _('Description') }}</label><br>
                                                    <textarea class="form-control" type="input" id="newpeoject_description"
                                                              name="newpeoject_description" value=""></textarea>
                                                </div>

                                                <div class="form-group">
                                                    <label>{{ _('Tags') }}</label><br>
                                                    <div style="max-width: 300px">
                                                        <div id="space_tags"></div>
                                                        <input type="hidden" id="newproject_tag" name="newproject_tag" value="">
                                                        <input type='text' id="tags" name="tags" placeholder='{{ _('Tags') }}'
                                                               class='tm-inputadd'/>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <label>{{ _('Principal investigator') }}</label><br>
                                                    <input class="form-control" type="input" id="newproject_principal_investigator"
                                                           name="newproject_principal_investigator" value="">
                                                </div>

                                                <div class="form-group">
                                                    <label>{{ _('Mail address') }}</label><br>
                                                    <input class="form-control" type="input" id="newproject_mail_address"
                                                           name="newproject_mail_address" value="">
                                                </div>
                                            </div>
                                            <div class="tab-pane" id="comments">
                                                <div class="form-group">
                                                    <label>{{ _('Number of observers who participated in the project') }}</label><br>
                                                    <input class="form-control" type="input" id="newproject_numobs" name="newproject_numobs" onkeypress="return justNumbers(event);" value="">
                                                </div>

                                                <div class="form-group">
                                                    <label>{{ _('Number of items each observer compares') }}</label><br>
                                                    <input class="form-control" type="input" id="newproject_numcom" name="newproject_numcom" onkeypress="return justNumbers(event);" value="">
                                                </div>
                                            </div>
                                            <div class="tab-pane " id="map">
                                                <input class="form-control" type="input" id="newproject_lat" name="newproject_lat" value="">
                                                <input class="form-control" type="input" id="newproject_lon" name="newproject_lon" value="">
                                                <div id="gmap_marker" class="gmaps" style="width: 100%;height: 400px"></div>
                                            </div>
                                        </div>
                                    </div>
                                </section>
                            </div>
                        </div>
                    </div>

                    <div class="modal-footer">
                        <button data-dismiss="modal" class="btn btn-default" type="button">{{ _('Cancel') }}</button>
                        <button class="btn btn-success" type="submit" name="btn_addNewProject">{{ _('Add') }}</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    {% if error_summary %}

        <div class="modal fade " id="addNewProjectE" tabindex="-1" role="dialog" aria-labelledby="addNewProjectLabel"
             aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header modal-header-success">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title">{{ _('Add new project') }}</h4>
                    </div>

                    <form name="addNewProjectForm" role="form" method="post" action="{{ request.path }}">
                        <div class="modal-body">
                            {% if error_summary %}
                                {% for key, error in error_summary.items() %}
                                    <div class="alert alert-block alert-danger fade in" id="loginErrorMessage">
                                        <button id="{{ key }}" data-dismiss="alert" class="close close-sm"
                                                type="button">
                                            <i class="fa fa-times"></i>
                                        </button>
                                        <strong>{{ _("Error!") }}</strong> {{ error }}.
                                    </div>
                                {% endfor %}
                            {% endif %}
                            <div class="row toastr-row">
                                <div class="col-md-12">
                                    <section class="panel">
                                        <header class="panel-heading tab-bg-dark-navy-blue">
                                            <ul class="nav nav-tabs nav-justified ">
                                                <li class="active">
                                                    <a href="#information2" data-toggle="tab">
                                                        {{ _('Información general') }}
                                                    </a>
                                                </li>
                                                <li>
                                                    <a href="#comments2" data-toggle="tab">
                                                        {{ _('Muestra') }}
                                                    </a>
                                                </li>
                                                <li class="">
                                                    <a href="#map2" data-toggle="tab" id="mapa">
                                                        {{ _('Mapa') }}
                                                    </a>
                                                </li>
                                            </ul>
                                        </header>
                                        <div class="panel-body">
                                            <div class="tab-content tasi-tab">
                                                <div class="tab-pane active" id="information2">
                                                    <div class="form-group">
                                                        <label> {{ _('Project Code') }}</label><br>
                                                        <input class="form-control" type="input" id="newproject_codeE"
                                                               name="newproject_code" value="{{ dataworking.project_cod }}">
                                                    </div>

                                                    <div class="form-group">
                                                        <label>{{ _('Project Name') }}</label><br>
                                                        <input class="form-control" type="input" id="newproject_nameE"
                                                               name="newproject_name" value="{{ dataworking.project_name }}">
                                                    </div>

                                                    <div class="form-group">
                                                        <label>{{ _('Description') }}</label><br>
                                                        <textarea class="form-control" type="input" id="newpeoject_descriptionE"
                                                                  name="newpeoject_description">{{ dataworking.project_abstract }}</textarea>
                                                    </div>

                                                    <div class="form-group">
                                                        <label>{{ _('Tags') }}</label><br>
                                                        <div style="max-width: 300px">
                                                            <div id="space_tagsE"></div>
                                                            <input type="hidden" id="newproject_tagE" name="newproject_tag"
                                                                   value="{{ dataworking.project_tags }}">
                                                            <input type='input' id="tagsE" name="tags" placeholder='{{ _('Tags') }}'
                                                                   class='tm-inputadd2'/>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <label>{{ _('Principal investigator') }}</label><br>
                                                        <input class="form-control" type="input" id="newproject_principal_investigatorE"
                                                               name="newproject_principal_investigator"
                                                               value="{{ dataworking.project_pi }}">
                                                    </div>

                                                    <div class="form-group">
                                                        <label>{{ _('Mail address') }}</label><br>
                                                        <input class="form-control" type="input" id="newproject_mail_addressE"
                                                               name="newproject_mail_address" value="{{ dataworking.project_piemail }}">
                                                    </div>
                                                </div>
                                                <div class="tab-pane" id="comments2">
                                                    <div class="form-group">
                                                        <label>{{ _('Number of observers who participated in the project') }}</label><br>
                                                        <input class="form-control" type="input" id="newproject_numobsE" name="newproject_numobs" onkeypress="return justNumbers(event);" value="{{ dataworking.project_numobs }}">
                                                    </div>

                                                    <div class="form-group">
                                                        <label>{{ _('Number of items each observer compares') }}</label><br>
                                                        <input class="form-control" type="input" id="newproject_numcomE" name="newproject_numcom" onkeypress="return justNumbers(event);" value="{{ dataworking.project_numcom }}">
                                                    </div>
                                                </div>
                                                <div class="tab-pane " id="map2">
                                                    <input class="form-control" type="input" id="newproject_latE" name="newproject_lat" value="{{ dataworking.project_lat }}">
                                                    <input class="form-control" type="input" id="newproject_lonE" name="newproject_lon" value="{{ dataworking.project_lon }}">
                                                    <div id="gmap_markerE" class="gmaps" style="width: 100%;height: 400px"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </section>

                                </div>
                            </div>
                        </div>

                        <div class="modal-footer">
                            <button data-dismiss="modal" class="btn btn-default"
                                    type="button">{{ _('Cancel') }}</button>
                            <button class="btn btn-success" type="submit"
                                    name="btn_addNewProject">{{ _('Add') }}</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    {% endif %}

    <!--



                                                                    CIERRA Para crear el proyecto


    -->



















{%- endblock page_content %}